# K-Line (Deprecated)
These are open data for public. It doesn't need an API key to call these methods. You can simple subscribe web socket request.

#### Table of Contents
 - [General Web Socket Information](#general-web-socket-information)
    - [Symbols](#symbols)
    - [Intervals](#intervals)
 - [K-Line](#kline)
     - [Subscribe](#kline-subscribe) 
     - [Unsubscribe](#kline-unsubscribe)  
     - [Request](#kline-request)
 - [Notes](#notes)
    
### General Web Socket Information
Connect web socket to URL below
```sh
wss://kline.indodax.com/ws/
```

#### Symbols
For `$symbol` you can use `pair->id`. To see available pairs, please see [`/api/pairs`][PublicRestApi]

#### Intervals
| Periods ||
| ------ | ------ |
| 1m | 1 Minutes |
| 5m | 5 Minutes |
| 15m | 15 Minutes |
| 30m | 30 Minutes |
| 1h | 1 Hours |
| 1d | 1 Days |

### Kline
You can get K-line data started at 00:00 AM with the following format
`{"req":"$symbol.kline.$interval", "id":"Generated By Client"}`. Change $symbol with pair id and $interval with periods. i.e below

#### Subscribe <a name="kline-subscribe"></a>
```sh
#Request
{"sub":"btcidr.kline.1m", "id":"1"}

#Response
{
    "ch": "btcidr.kline.1m",
    "ts": 1618129869,
    "tick": {
        "pair": "btcidr",
        "type": "1m",
        "o": 885500000,
        "h": 885500000,
        "l": 885250000,
        "c": 885499000,
        "v": 0.30952696,
        "t": 1618145760,
        "bv": 274010241
    }
}
```

If you want to get all pair for each interval, you can susbscribe the data with the following format
`{"req":"all.kline.$interval", "id":"Generated By Client"}`. Change $interval with periods. i.e below
```sh
#Request
{"sub":"all.kline.1m", "id":"1"}

#Response
{
    "ch": "all.kline.1m",
    "ts": 1617957337,
    "tick": {
        "pair": "idkidr",
        "type": "1m",
        "o": 999,
        "h": 999,
        "l": 999,
        "c": 999,
        "v": 0,
        "t": 1618138740,
        "bv": 0
    }
}
```

#### Unsubscribe <a name="kline-unsubscribe"></a>
```sh
#Request
{"unsub":"btcidr.kline.1m", "id":"1"}

#Response
{
    "id":"1",
    "status":"ok",
    "ts":1570088533,
    "unsubbed":"btcidr.kline.1m"
}
```

#### Request <a name="kline-request"></a>
```sh
#Request
{"req":"btcidr.kline.1m", "id":"2"}
#it will automatically get data started at 00:00 AM today

{"req":"btcidr.kline.1m", "from":1569607200, "to":1569842641, "id":"2"}
#it will get data started from 1569607200 to 1569842641 in unixtime

#Response
{
    "rep":"btcidr.kline.1m",
    "status":"ok",
    "tick":[
        {
            "c":145012000,
            "h":145012000,
            "l":145012000,
            "o":145012000,
            "pair":"btcidr",
            "t":1566406800,
            "type":"1m",
            "v":401148449
        },
        {
            "c":145012000,
            "h":145012000,
            "l":145012000,
            "o":145012000,
            "pair":"btcidr",
            "t":1566406860,
            "type":"1m",
            "v":401148449
        }
    ]
}
```

### Notes
For testing you can use these library 
 - [WebSocket cat - Nodejs](https://www.npmjs.com/package/wscat)
 - [Browser WebSocket Client - Google Chrome Extension](https://chrome.google.com/webstore/detail/browser-websocket-client/mdmlhchldhfnfnkfmljgeinlffmdgkjo?hl=en) 

[PublicRestApi]: <https://github.com/btcid/indodax-official-api-docs/blob/master/Public-RestAPI.md#pairs>
