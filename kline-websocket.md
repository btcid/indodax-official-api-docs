# K-Line
These are open data for public. It doesn't need an API key to call these methods. You can simple subscribe web socket request.

## Table of Contents
 - [General Web Socket Information](#general-web-socket-information)
    - [Symbols](#symbols)
    - [Intervals](#intervals)
 - [K-Line](#kline)
     - [Subscribe](#kline-subscribe) 
     - [Unsubscribe](#kline-unsubscribe)  
     - [Request](#kline-request)
 - [Trade Detail](#trade-detail)
     - [Subscribe](#trade-detail-subscribe) 
     - [Unsubscribe](#trade-detail-unsubscribe)  
     - [Request](#trade-detail-request)
 - [Notes](#notes)
    
## General Web Socket Information
Connect web socket to URL below
```sh
wss://kline.indodax.com/ws/
```

## Symbols
For `$symbol` you can use `pair->id`. To see available pairs, please see [`/api/pairs`][PublicRestApi]

## Intervals
| Periods ||
| ------ | ------ |
| 1m | 1 Minutes |
| 5m | 5 Minutes |
| 15m | 15 Minutes |
| 30m | 30 Minutes |
| 1h | 1 Hours |
| 1d | 1 Days |

## Kline
You can get K-line data started at 00:00 AM with the following format
`{"req":"$symbol.kline.$interval", "id":"Generated By Client"}`. Change $symbol with pair id and $interval with periods. i.e below

### Subscribe kline <a name="kline-subscribe"></a>
Request
```json
{"sub":"btcidr.kline.1m", "id":"1"}
```
Response
```json
{
    "ch":"btcidr.1m",
    "ts":1570086780,
    "tick": {
        "pair":"btcidr",
        "type":"1m",
        "c":145300000,
        "h":145300000,
        "l":143900000,
        "o":145300000,
        "t":1566468720,
        "v":421514329
    }
}
```

### Unsubscribe Kline <a name="kline-unsubscribe"></a>
Request
```json
{"unsub":"btcidr.kline.1m", "id":"1"}
```
Response
```json
{
    "id":"1",
    "status":"ok",
    "ts":1570088533,
    "unsubbed":"btcidr.kline.1m"
}
```

#### Pull Request Kline <a name="kline-request"></a>

Get data from specific time range

Request
```json
{
    "req":"btcidr.kline.1m", 
    "from":1569607200, 
    "to":1569842641, 
    "id":"btcidr-kline-1m"
}
```
`id` is mandatory

Response
```json
{
    "rep":"btcidr.kline.1m",
    "status":"ok",
    "tick":[
        {
            "c":145012000,
            "h":145012000,
            "l":145012000,
            "o":145012000,
            "pair":"btcidr",
            "t":1566406800,
            "type":"1m",
            "v":401148449
        },
        {
            "c":145012000,
            "h":145012000,
            "l":145012000,
            "o":145012000,
            "pair":"btcidr",
            "t":1566406860,
            "type":"1m",
            "v":401148449
        }
    ]
}
```

#### Subscribe Trade <a name="trade-detail-subscribe"></a>

Request
```json
{"sub":"btcidr.trade", "id":"id3"}
```

Response
```json 
{
    "ch":"btcidr.trade",
    "ts":1570088960,
    "data":{
        "amount":32236,
        "direction":1, //buy
        "price":118876000,
        "trade_time":1570088960
    }
}
```

#### Unsubscribe Trade <a name="trade-detail-unsubscribe"></a>

Request
```json
{"unsub":"btcidr.trade", "id":"id3"}
```

Response
```json
{
    "id":"id3",
    "status":"ok",
    "ts":1570091275,
    "unsubbed":"btcidr.trade"
}
```

#### Pull Request Trade <a name="trade-detail-request"></a>

Get data start from `1569607200` to `1569842641` in unixtime

Request
```json
{
    "req":"btcidr.trade", 
    "from":1569607200, 
    "to":1569842641, 
    "id": "btcidr-trade"
}
```

Response
```json
{
    "rep":"btcidr.trade",
    "status":"ok",
    "trade":[
        {
            "amount":900000,
            "direction":2, #Sell
            "price":118079000,
            "trade_time":1570035698
        },
        {
            "amount":1164359,
            "direction":1, #Buy
            "price":118080000,
            "trade_time":1570035965
        }
    ]
}
```

### Notes
For testing you can use these library 
 - [WebSocket cat - Nodejs](https://www.npmjs.com/package/wscat)
 - [Browser WebSocket Client - Google Chrome Extension](https://chrome.google.com/webstore/detail/browser-websocket-client/mdmlhchldhfnfnkfmljgeinlffmdgkjo?hl=en) 

[PublicRestApi]: <https://github.com/btcid/indodax-official-api-docs/blob/master/Public-RestAPI.md#pairs>
